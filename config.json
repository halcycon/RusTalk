{
  "server": {
    "bind_address": "0.0.0.0",
    "bind_port": 5060,
    "workers": 4
  },
  "sip": {
    "domain": "rustalk.local",
    "user_agent": "RusTalk/0.1.0",
    "max_forwards": 70,
    "session_expires": 1800
  },
  "transport": {
    "protocols": [
      "udp",
      "tcp",
      "tls"
    ],
    "udp_port": 5060,
    "tcp_port": 5060,
    "tls_port": 5061,
    "tls_cert": "/etc/rustalk/cert.pem",
    "tls_key": "/etc/rustalk/key.pem"
  },
  "database": {
    "url": "postgresql://rustalk:password@localhost/rustalk",
    "max_connections": 10,
    "min_connections": 2
  },
  "teams": {
    "enabled": true,
    "sbc_fqdn": "sbc.example.com",
    "mtls_cert": "/etc/rustalk/teams-cert.pem",
    "mtls_key": "/etc/rustalk/teams-key.pem",
    "trunk_fqdn": "sip.pstnhub.microsoft.com"
  },
  "acme": {
    "enabled": true,
    "email": "admin@example.com",
    "domains": [
      "sbc.example.com"
    ],
    "cert_dir": "/etc/rustalk/certs",
    "account_dir": "/etc/rustalk/acme",
    "use_staging": false,
    "http_challenge_port": 80,
    "challenge_type": "http-01",
    "auto_renew_days": 30
  },
  "codecs": {
    "codecs": [
      {
        "name": "PCMU",
        "payload_type": 0,
        "clock_rate": 8000,
        "channels": 1,
        "description": "G.711 Î¼-law (64 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "PCMA",
        "payload_type": 8,
        "clock_rate": 8000,
        "channels": 1,
        "description": "G.711 A-law (64 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "G722",
        "payload_type": 9,
        "clock_rate": 8000,
        "channels": 1,
        "description": "G.722 wideband (64 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "GSM",
        "payload_type": 3,
        "clock_rate": 8000,
        "channels": 1,
        "description": "GSM Full Rate (13 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "G729",
        "payload_type": 18,
        "clock_rate": 8000,
        "channels": 1,
        "description": "G.729 (8 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "iLBC",
        "payload_type": 97,
        "clock_rate": 8000,
        "channels": 1,
        "description": "Internet Low Bitrate Codec (13.33/15.2 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "opus",
        "payload_type": 111,
        "clock_rate": 48000,
        "channels": 2,
        "description": "Opus codec (6-510 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "AMR",
        "payload_type": 96,
        "clock_rate": 8000,
        "channels": 1,
        "description": "Adaptive Multi-Rate narrowband (4.75-12.2 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "AMR-WB",
        "payload_type": 98,
        "clock_rate": 16000,
        "channels": 1,
        "description": "Adaptive Multi-Rate wideband (6.6-23.85 kbps)",
        "enabled": true,
        "is_standard": true
      },
      {
        "name": "SILK",
        "payload_type": 99,
        "clock_rate": 16000,
        "channels": 1,
        "description": "Skype SILK codec (6-40 kbps)",
        "enabled": true,
        "is_standard": true
      }
    ]
  },
  "routing": {
    "routes": [
      {
        "id": "route-business-hours",
        "name": "Business Hours - Internal Extensions",
        "description": "Route internal calls during business hours (Mon-Fri, 9am-5pm)",
        "pattern": "^[2-5]\\d{3}$",
        "destination": {
          "type": "Extension",
          "value": "${destination}"
        },
        "enabled": true,
        "priority": 10,
        "conditions": [
          {
            "type": "Time",
            "start_time": "09:00",
            "end_time": "17:00"
          },
          {
            "type": "DayOfWeek",
            "days": [1, 2, 3, 4, 5]
          }
        ],
        "action": "accept",
        "continue_on_match": false
      },
      {
        "id": "route-after-hours",
        "name": "After Hours - Voicemail",
        "description": "Send calls to voicemail outside business hours",
        "pattern": "^[2-5]\\d{3}$",
        "destination": {
          "type": "Voicemail",
          "value": "${destination}"
        },
        "enabled": true,
        "priority": 20,
        "conditions": [],
        "action": "accept",
        "continue_on_match": false
      },
      {
        "id": "route-emergency",
        "name": "Emergency Numbers",
        "description": "Route emergency numbers to appropriate trunk",
        "pattern": "^(911|999|112)$",
        "destination": {
          "type": "Trunk",
          "value": "emergency-trunk"
        },
        "enabled": true,
        "priority": 5,
        "conditions": [],
        "action": "accept",
        "continue_on_match": false
      },
      {
        "id": "route-international-block",
        "name": "Block International Calls",
        "description": "Block international calls (starting with +, except US/Canada)",
        "pattern": "^\\+(?!1).*$",
        "destination": {
          "type": "Hangup"
        },
        "enabled": true,
        "priority": 15,
        "conditions": [],
        "action": "reject",
        "continue_on_match": false
      },
      {
        "id": "route-us-canada",
        "name": "US/Canada Numbers",
        "description": "Route US and Canada calls to PSTN trunk",
        "pattern": "^\\+1\\d{10}$",
        "destination": {
          "type": "Trunk",
          "value": "pstn-trunk"
        },
        "enabled": true,
        "priority": 25,
        "conditions": [],
        "action": "accept",
        "continue_on_match": false
      },
      {
        "id": "route-support-team",
        "name": "Support Ring Group",
        "description": "Route extension 8000 to support ring group",
        "pattern": "^8000$",
        "destination": {
          "type": "RingGroup",
          "value": "support-team"
        },
        "enabled": true,
        "priority": 8,
        "conditions": [],
        "action": "accept",
        "continue_on_match": false
      }
    ]
  }
}
